services:
  - type: web
    name: bus-management-api
    env: dotnet
    repo: https://github.com/gretakay/BusManagementSystem.git
    buildCommand: dotnet publish BusManagementSystem/BusManagementSystem.csproj -c Release -o out --self-contained false
    startCommand: dotnet out/BusManagementSystem.dll
    plan: free
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: ASPNETCORE_URLS
        value: http://0.0.0.0:$PORT
      - key: ConnectionStrings__DefaultConnection
        value: Host=ep-noisy-shape-a1wz32ec-pooler.ap-southeast-1.aws.neon.tech;Database=neondb;Username=neondb_owner;Password=npg_C1Vk9TenJgNx;SSL Mode=Require;Channel Binding=require
      - key: JwtSettings__SecretKey
        value: BusManagement_SuperSecretKey_ForJWT_Authentication_2025
      - key: JwtSettings__Issuer
        value: BusManagementSystem
      - key: JwtSettings__Audience
        value: BusManagementUsers
      - key: JwtSettings__ExpiryMinutes
        value: 60
      - key: QrCodeSettings__SecretKey
        value: QR_Secret_Key_For_Bus_Scanning_2025